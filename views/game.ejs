<div class="container" style="height: 100vh;">
    <div class="row h-100 align-items-center">
        <!-- Game Display Container (Left Side) -->
        <div class="col-md-8"> <!-- Increased the size of the game display area -->
            <div style="width:100%; height:auto; aspect-ratio:3/2; max-width: 100%">
                <div id="game"></div>
            </div>
        </div>

        <!-- Game Details and Controls Box (Right Side) -->
        <div class="col-md-4"> <!-- Decreased the size of the information box -->
            <div class="game-info-box p-4" style="background-color: rgba(0, 0, 0, 1); border-radius: 15px; color: #fff; font-family: 'Press Start 2P', cursive;">
                <!-- Game Name Heading -->
                <h1 class="game-title mb-4" style="color: #fff; font-family: 'Press Start 2P', cursive; font-size: 20px;">
                    <%= game.name %>
                </h1>

                <!-- Game Objective -->
                <div id="game-description" class="mb-4" style="font-size: 14px;">
                    <!-- Description will be filled in by JavaScript -->
                </div>

                <!-- Game Controls -->
                <div id="game-controls" style="font-size: 14px;">
                    <!-- Controls will be filled in by JavaScript -->
                </div>
            </div>

            <!-- Game Short Description and Image -->
            <div class="game-info-short mt-4" style="background-color: rgba(0, 0, 0, 0.8); border-radius: 10px; padding: 10px; color: #fff; font-family: 'Press Start 2P', cursive;">
                <div id="game-short-description" style="font-size: 12px;">
                    <!-- Short description will be filled in by JavaScript -->
                </div>
                <div class="mt-3">
                    <img id="game-image" src="" alt="Game Image" style="width: 100%; border-radius: 10px;">
                </div>
            </div>
        </div>
    </div>

    <!-- Emulator Script -->
    <script>
        EJS_player = "#game";

        // Core
        EJS_core = "<%= game.core %>";

        EJS_gameName = "<%= game.name %>";
        EJS_color = "#0064ff";
        EJS_pathtodata = "https://cdn.emulatorjs.org/stable/data/";

        // Game URL
        EJS_gameUrl = "<%= game.gameUrl %>";

        // JavaScript to Fill Game Details
        window.onload = function() {
            const gameDescription = document.getElementById('game-description');
            const gameControls = document.getElementById('game-controls');
            const gameShortDescription = document.getElementById('game-short-description');
            const gameImage = document.getElementById('game-image');

            // Normalize game name to handle variations
            const normalizedGameName = EJS_gameName.toLowerCase();

            // Define game details
            const gameDetails = {
                'super mario bros': {
                    description: `
                        <strong>Developer:</strong> Nintendo <br>
                        <strong>Consoles:</strong> NES <br>
                        <strong>History:</strong> Released in 1985, it is a classic platformer that popularized the genre.
                    `,
                    image: 'path/to/super-mario-bros-image.jpg' // Replace with actual image path
                },
                'sonic the hedgehog': {
                    description: `
                        <strong>Developer:</strong> Sega <br>
                        <strong>Consoles:</strong> Sega Genesis <br>
                        <strong>History:</strong> Released in 1991, it introduced Sonic as Sega's mascot and was known for its speed-based gameplay.
                    `,
                    image: 'path/to/sonic-the-hedgehog-image.jpg' // Replace with actual image path
                },
                'sub-terrania': {
                    description: `
                        <strong>Developer:</strong> Zyrinx <br>
                        <strong>Consoles:</strong> Sega Genesis <br>
                        <strong>History:</strong> Released in 1993, it's known for its unique 2D shooter gameplay and sci-fi setting.
                    `,
                    image: 'path/to/sub-terrania-image.jpg' // Replace with actual image path
                },
                'dream land': {
                    description: `
                        <strong>Developer:</strong> HAL Laboratory <br>
                        <strong>Consoles:</strong> Game Boy <br>
                        <strong>History:</strong> Released in 1992, it features Kirby's debut and is celebrated for its charm and innovative gameplay.
                    `,
                    image: 'path/to/dream-land-image.jpg' // Replace with actual image path
                }
            };

            if (gameDetails[normalizedGameName]) {
                gameDescription.innerHTML = `
                    <strong>Objective:</strong> ${gameDetails[normalizedGameName].description}
                `;

                gameControls.innerHTML = `
                    <strong>Controls:</strong><br>
                    <ul>
                        <!-- Controls as defined previously -->
                    </ul>
                `;

                gameShortDescription.innerHTML = gameDetails[normalizedGameName].description;
                gameImage.src = gameDetails[normalizedGameName].image;
            } else {
                gameDescription.innerHTML = `
                    <strong>Objective:</strong> No objective available for this game.
                `;
                gameControls.innerHTML = `
                    <strong>Controls:</strong> No controls available for this game.
                `;
                gameShortDescription.innerHTML = `
                    <strong>Developer:</strong> Unknown <br>
                    <strong>Consoles:</strong> Unknown <br>
                    <strong>History:</strong> Unknown
                `;
                gameImage.src = 'path/to/default-image.jpg'; // Replace with a default image path
            }
        };
    </script>

    <script src="https://cdn.emulatorjs.org/stable/data/loader.js"></script>
</div>

<!-- Additional Section for Game Selection -->
<div class="container mt-5">
    <div class="row">
      <% items.forEach(item => { %>
        <div class="col-md-4 mb-4">
          <div class="card text-bg-dark">
              <a href="/game/<%= item._id %>">
                <div class="ratio" style="--bs-aspect-ratio: 115%;">
                  <img src="<%= item.image %>" class="object-fit-contain rounded" alt="...">
                </div>
                <div class="card-img-overlay">
                </div>
              </a>
            </div>
        </div>
      <% }) %>
    </div>
</div>

<!-- Pagination Buttons -->
<div class="container">
  <p></p>
  <nav aria-label="Page navigation example">
    <ul class="pagination justify-content-center">
      <li class="page-item">
        <a class="page-link" href="/prev">Previous</a>
      </li>
      <li class="page-item">
        <a class="page-link" href="/next">Next</a>
      </li>
    </ul>
  </nav>
</div>
